<!DOCTYPE html><html lang="en"><head>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="text/html; charset=utf-8" http-equiv="content-type">
<meta name="generator" content="ReSpec 35.4.1">
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;background:var(--indextable-hover-bg,#fff);color:#000;color:var(--text,#000);box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);box-shadow:0 1em 3em -.4em var(--tocsidebar-shadow,rgba(0,0,0,.3)),0 0 1px 1px var(--tocsidebar-shadow,rgba(0,0,0,.05));border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;border-bottom-color:var(--indextable-hover-bg,#fff);top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1;border-bottom-color:var(--indextable-hover-bg,#a2a9b1)}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;color:var(--text,#000);margin-top:.25em}
.dfn-panel ul a[href]{color:#333;color:var(--text,#333)}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
    
    
    
<title>FSC - External Contract Reference 1.0.0</title>
    
<link rel="shortcut icon" type="image/x-icon" href="https://gitdocumentatie.logius.nl/publicatie/respec/style/logos/logius.ico">
    
  
<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:italic}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline;position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-.7em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
<style id="respec-nlgov">
img.license{float:left;padding-right:5px;background:0 0}
</style>
<meta name="color-scheme" content="light">
<meta name="description" content="External Contract Reference is an extension on the Federated Service Connectivity (FSC) standard FSC Core.
It can only be used in addition to the FSC Core specification.
The purpose of the External Contract Reference extension is to allow delegation through contracts that are not defined by FSC.
The External Contract Reference extension contains descriptions of the Properties that can be added to the
ServiceConnectionGrant and the ServicePublicationGrant, and how these properties can be used by the FSC components.">
<style>
.hljs{--base:#fafafa;--mono-1:#383a42;--mono-2:#686b77;--mono-3:#717277;--hue-1:#0b76c5;--hue-2:#336ae3;--hue-3:#a626a4;--hue-4:#42803c;--hue-5:#ca4706;--hue-5-2:#c91243;--hue-6:#986801;--hue-6-2:#9a6a01}
@media (prefers-color-scheme:dark){
.hljs{--base:#282c34;--mono-1:#abb2bf;--mono-2:#818896;--mono-3:#5c6370;--hue-1:#56b6c2;--hue-2:#61aeee;--hue-3:#c678dd;--hue-4:#98c379;--hue-5:#e06c75;--hue-5-2:#be5046;--hue-6:#d19a66;--hue-6-2:#e6c07b}
}
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;color:var(--mono-1,#383a42);background:#fafafa;background:var(--base,#fafafa)}
.hljs-comment,.hljs-quote{color:#717277;color:var(--mono-3,#717277);font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4;color:var(--hue-3,#a626a4)}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;color:var(--hue-5,#ca4706);font-weight:700}
.hljs-literal{color:#0b76c5;color:var(--hue-1,#0b76c5)}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c;color:var(--hue-4,#42803c)}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01;color:var(--hue-6-2,#9a6a01)}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801;color:var(--hue-6,#986801)}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3;color:var(--hue-2,#336ae3)}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>

  .sidelabel {
    position: fixed;
    -webkit-transform-origin: top right;
    right: 100%;
    top: 0;
    -webkit-transform: rotate(-90deg);
    padding: 4px 50px 4px 10px;
    color: white;
    white-space: nowrap;
    z-index: 1;
    background-color: #000000;
  }
</style>
<script id="initialUserConfig" type="application/json">{
  "nl_organisationName": "Logius",
  "nl_organisationStylesURL": "https://gitdocumentatie.logius.nl/publicatie/respec/style/",
  "nl_organisationPublishURL": "https://gitdocumentatie.logius.nl/publicatie/",
  "logos": [
    {
      "src": "https://gitdocumentatie.logius.nl/publicatie/respec/style/logos/figure-logius.svg",
      "alt": "Logius",
      "id": "Logius",
      "height": 77,
      "width": 44,
      "url": "https://www.logius.nl/onze-dienstverlening/standaarden"
    }
  ],
  "useLogo": true,
  "fileName": "",
  "latestVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "shortName",
    "/",
    "fileName"
  ],
  "thisVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "shortName",
    "/",
    "publishVersion",
    "/",
    "fileName"
  ],
  "prevVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "shortName",
    "/",
    "previousPublishVersion",
    "/",
    "fileName"
  ],
  "addSectionLinks": true,
  "localizationStrings": {
    "en": {
      "wv": "Draft",
      "cv": "Consultation version",
      "vv": "Proposed version",
      "def": "Definitive version",
      "basis": "Document",
      "eo": "Outdated version",
      "tg": "Rescinded version",
      "no": "Norm",
      "st": "Standard",
      "im": "Information model",
      "pr": "Guideline",
      "hr": "Guide",
      "wa": "Proposed recommendation",
      "al": "General",
      "bd": "Governance documentation",
      "bp": "Best practice"
    },
    "nl": {
      "wv": "Werkversie",
      "cv": "Consultatieversie",
      "vv": "Versie ter vaststelling",
      "def": "Vastgestelde versie",
      "basis": "Document",
      "eo": "Verouderde versie",
      "tg": "Teruggetrokken versie",
      "no": "Norm",
      "st": "Standaard",
      "im": "Informatiemodel",
      "pr": "Praktijkrichtlijn",
      "hr": "Handreiking",
      "wa": "Werkafspraak",
      "al": "Algemeen",
      "bd": "Beheerdocumentatie",
      "bp": "Best practice"
    }
  },
  "sotdText": {
    "nl": {
      "sotd": "Status van dit document",
      "def": "Dit is de definitieve versie van dit document. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.",
      "wv": "Dit is een werkversie die op elk moment kan worden gewijzigd, verwijderd of vervangen door andere documenten. Het is geen door het TO goedgekeurde consultatieversie.",
      "cv": "Dit is een door het TO goedgekeurde consultatieversie. Commentaar over dit document kan gestuurd worden naar digikoppeling@logius.nl",
      "vv": "Dit is een definitief concept van de nieuwe versie van dit document. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.",
      "basis": "Dit is een document zonder officiële status."
    },
    "en": {
      "sotd": "Status of This Document",
      "def": "This is the definitive version of this document. Edits resulting from consultations have been applied.",
      "wv": "This is a draft that could be altered, removed or replaced by other documents. It is not a recommendation approved by TO.",
      "cv": "This is a proposed recommendation approved by TO. Comments regarding this document may be sent to api@logius.nl",
      "vv": "This is the definitive concept of this document. Edits resulting from consultations have been applied.",
      "basis": "This document has no official standing."
    }
  },
  "labelColor": {
    "def": "#154273",
    "wv": "#39870c",
    "cv": "#000000",
    "vv": "#000000"
  },
  "useLabel": true,
  "licenses": {
    "cc0": {
      "name": "Creative Commons 0 Public Domain Dedication",
      "short": "CC0",
      "url": "https://creativecommons.org/publicdomain/zero/1.0/",
      "image": "https://gitdocumentatie.logius.nl/publicatie/respec/media/logos/cc-zero.svg"
    },
    "cc-by": {
      "name": "Creative Commons Attribution 4.0 International Public License",
      "short": "CC-BY",
      "url": "https://creativecommons.org/licenses/by/4.0/legalcode",
      "image": "https://gitdocumentatie.logius.nl/publicatie/respec/media/logos/cc-by.svg"
    },
    "cc-by-nd": {
      "name": "Creative Commons Naamsvermelding-GeenAfgeleideWerken 4.0 Internationaal",
      "short": "CC-BY-ND",
      "url": "https://creativecommons.org/licenses/by-nd/4.0/legalcode.nl",
      "image": "https://gitdocumentatie.logius.nl/publicatie/respec/media/logos/cc-by-nd.svg"
    }
  },
  "license": "cc-by",
  "localBiblio": {
    "ADR": {
      "authors": [
        "Jasper Roes",
        "Joost Farla"
      ],
      "href": "https://gitdocumentatie.logius.nl/publicatie/api/adr/2.1",
      "publisher": "Logius",
      "title": "API Design Rules"
    },
    "ADR1": {
      "authors": [
        "Jasper Roes",
        "Joost Farla"
      ],
      "href": "https://gitdocumentatie.logius.nl/publicatie/api/adr/1.0",
      "publisher": "Logius",
      "title": "API Design Rules"
    },
    "ADR-ext": {
      "authors": [
        "Jasper Roes",
        "Linda van den Brink"
      ],
      "date": "Januari 2020",
      "href": "https://docs.geostandaarden.nl/api/API-Strategie-ext",
      "publisher": "Geonovum/Kennisplatform APi's",
      "title": "API Designrules Extensions (Nederlandse API Strategie IIb)"
    },
    "Algemene Voorwaarden Logius": {
      "date": "12 juni 2018",
      "href": "https://www.logius.nl/onze-organisatie/zakendoen-met-logius/voorwaarden/algemene-voorwaarden-logius",
      "publisher": "Logius",
      "title": "Algemene voorwaarden Logius"
    },
    "AuthZEN": {
      "date": "6 September 2024 ",
      "href": "https://openid.net/specs/authorization-api-1_0-01.html",
      "publisher": "OpenID",
      "title": "Authorization API 1.0 – draft 01"
    },
    "AVG": {
      "date": "27 april 2016",
      "href": "https://eur-lex.europa.eu/legal-content/NL/TXT/?uri=CELEX%3A32016R0679",
      "publisher": "Verordening (EU) 2016/679 van het Europees Parlement",
      "title": "Algemene Verordening Gegevensbescherming"
    },
    "BCP195": {
      "authors": [
        "Y. Sheffer",
        "R. Holz",
        "P. Saint-Andre"
      ],
      "date": "May 2015",
      "href": "https://tools.ietf.org/html/bcp195",
      "publisher": "IETF",
      "title": "Recommendations for Secure Use of Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS)"
    },
    "DK-beveiliging": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/beveilig/",
      "publisher": "Logius",
      "title": "Digikoppeling Beveiligingsstandaarden en voorschriften"
    },
    "CloudEvents": {
      "date": "May 2011",
      "href": "https://github.com/cloudevents/spec/blob/v1.0.1/spec.md",
      "publisher": "CNCF Serverless Working Group",
      "title": "CloudEvents - Version 1.0.1"
    },
    "NLGOV-CloudEvents": {
      "authors": [
        "Werkgroep Berichtenstandaard (Project Notificatieservices)"
      ],
      "href": "https://logius-standaarden.github.io/NL-GOV-profile-for-CloudEvents/",
      "publisher": "Logius",
      "title": "NL GOV profile for CloudEvents"
    },
    "DK-CV": {
      "href": "https://gitlab.com/logius/digikoppeling-compliance",
      "publisher": "Logius",
      "title": "Digikoppeling Compliance Voorziening"
    },
    "DK-Portaal": {
      "href": "https://oinregister.logius.nl/",
      "publisher": "Logius",
      "title": "Digikoppeling Portaal"
    },
    "DK-WUS-voorbeeld": {
      "href": "https://www.logius.nl/sites/default/files/public/bestanden/diensten/DigiKoppeling/Overig/Digikoppeling-Koppelvlakstandaard-WUS-Voorbeeldberichten.zip",
      "publisher": "Logius",
      "title": "Set voorbeeldberichten (zip)"
    },
    "Deployment Guide 1.1": {
      "authors": [
        "Pete Wenzel",
        "Jacques Durand"
      ],
      "date": "June 2005",
      "href": "http://www.oasis-open.org/apps/org/workgroup/ebxml-iic-deployment-profile-template-intro-100406.doc",
      "publisher": "OASIS",
      "title": "Deployment Profile Template For OASIS ebXML Message Service 2.0"
    },
    "DK": {
      "href": "https://www.logius.nl/domeinen/gegevensuitwisseling/digikoppeling",
      "publisher": "Logius",
      "title": "Logius | Digikoppeling"
    },
    "DK-Doc": {
      "href": "https://www.logius.nl/domeinen/gegevensuitwisseling/digikoppeling/documentatie",
      "publisher": "Logius",
      "title": "Digikoppeling documentatie"
    },
    "DK-Beheermodel": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/beheer/",
      "publisher": "Logius",
      "title": "Digikoppeling Beheermodel"
    },
    "DK-BPebMS": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/bpebms/",
      "publisher": "Logius",
      "title": "Digikoppeling Best Practices ebMS2"
    },
    "DK-BPGB": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/bpgb/",
      "publisher": "Logius",
      "title": "Digikoppeling Best Practices Grote Berichten"
    },
    "DK-BPWUS": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/bpwus/",
      "publisher": "Logius",
      "title": "Digikoppeling Best Practices WUS"
    },
    "DK-Beveiliging": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/beveilig/",
      "publisher": "Logius",
      "title": "Digikoppeling Beveiligingsstandaarden en voorschriften"
    },
    "DK-gbachtcert": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/ebms/",
      "publisher": "Logius",
      "title": "Digikoppeling Koppelvlakstandaard ebMS2"
    },
    "DK-ebMS": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/ebms/",
      "publisher": "Logius",
      "title": "Digikoppeling Koppelvlakstandaard ebMS2"
    },
    "DK-GB": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/gb/",
      "publisher": "Logius",
      "title": "Digikoppeling Koppelvlakstandaard Grote Berichten"
    },
    "DK-WUS": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/wus/",
      "publisher": "Logius",
      "title": "Digikoppeling Koppelvlakstandaard WUS"
    },
    "DK-RESTAPI": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/restapi/",
      "publisher": "Logius",
      "title": "Digikoppeling Koppelvlakstandaard REST-API"
    },
    "DK-Architectuur": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/architectuur/",
      "publisher": "Logius",
      "title": "Digikoppeling Architectuur"
    },
    "DK-IDAuth": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/idauth/",
      "publisher": "Logius",
      "title": "Digikoppeling Identificatie en Authenticatie"
    },
    "DK-WI": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/dk/watisdk/",
      "publisher": "Logius",
      "title": "Wat is Digikoppeling?"
    },
    "BOMOSFundament": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/bomos/fundament/",
      "date": "2 november 2023",
      "publisher": "Logius",
      "title": "BOMOS, het fundament"
    },
    "BOMOSVerdieping": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/bomos/verdieping/",
      "date": "2 november 2023",
      "publisher": "Logius",
      "title": "BOMOS, de verdieping"
    },
    "ebCPP": {
      "authors": [
        "Oasis"
      ],
      "date": "september 2002",
      "href": "http://www.ebxml.org/specs/ebcpp-2.0.pdf",
      "publisher": "Oasis",
      "title": "Collaboration-Protocol Profile and Agreement Specification Version 2.0"
    },
    "ebMS3": {
      "authors": [
        "Ian Jones",
        "Pete Wenzel"
      ],
      "date": "October 2007",
      "href": "https://docs.oasis-open.org/ebxml-msg/ebms/v3.0/core/os/ebms_core-3.0-spec-os.html",
      "publisher": "Oasis",
      "title": "Collaboration-Protocol Profile and Agreement Specification Version 2.0"
    },
    "eDelivery API4IPS": {
      "authors": [
        "J. Dimitriou, V. Veduta, B. Dumitriu"
      ],
      "date": "sept 8 2022",
      "href": "https://ec.europa.eu/digital-building-blocks/wikis/display/EDELCOMMUNITY/Project+deliverables",
      "publisher": "OpenID foundation",
      "title": "(ISA2).(eDelivery).(Piloting a REST API extension of CEF eDelivery).(ISA² IPS REST API Profile).(v1.0).pdf"
    },
    "Expert": {
      "authors": [
        "@@@"
      ],
      "date": "@@@",
      "href": "https://www.forumstandaardisatie.nl/sites/bfs/files/@@@.pdf",
      "publisher": "Forum Standaardisatie",
      "title": "Expertadvies CloudEvents 1.0"
    },
    "folmer2011": {
      "href": "https://research.utwente.nl/en/publications/management-and-development-model-for-open-standards-bomos-version",
      "title": "Management and Development Model for Open Standards (BOMOS) version 2",
      "keywords": "IR-76837",
      "authors": [
        "ErwinFolmer",
        "Matthijs Punter"
      ],
      "date": "2011",
      "language": "English",
      "publisher": "Programmabureau NOiV"
    },
    "folmer2012": {
      "href": "https://research.utwente.nl/en/publications/quality-of-semantic-standards",
      "title": "Quality of Semantic Standards",
      "authors": [
        "Erwin Folmer"
      ],
      "date": "2012",
      "publisher": "Universiteit Twente"
    },
    "DK-Gebruiksvoorwaarden": {
      "date": "1 januari 2021",
      "href": "https://www.logius.nl/domeinen/gegevensuitwisseling/digikoppeling/documentatie/gebruiksvoorwaarden-digikoppeling",
      "publisher": "Logius",
      "title": "Gebruiksvoorwaarden Digikoppeling"
    },
    "ADR-GEO": {
      "authors": [
        "L. van den Brink, P. Bresters, P. van Genuchten, G. Mathijssen, M. Strijker"
      ],
      "date": "March 07, 2024",
      "href": "https://gitdocumentatie.logius.nl/publicatie/api/mod-geo/",
      "publisher": "Geonovum",
      "title": "API Design Rules Module: Geospatial"
    },
    "HTTPS-factsheet NCSC": {
      "date": "Nov 2014",
      "href": "https://www.ncsc.nl/documenten/factsheets/2019/juni/01/factsheet-https-kan-een-stuk-veiliger",
      "publisher": "NCSC",
      "title": "Factsheet HTTPS kan een stuk veiliger"
    },
    "iGOV.OpenID": {
      "authors": [
        "M. Varley, P. Grassi"
      ],
      "date": "October 5 2018",
      "href": "https://openid.net/specs/openid-igov-openid-connect-1_0.html",
      "publisher": "OpenID foundation",
      "title": "International Government Assurance Profile (iGov) for OpenID Connect 1.0 - draft 3"
    },
    "NLGOV.OpenID": {
      "authors": [
        "Remco Schaar, Frank van Es, Joris Joosten, Jan Geert Koops"
      ],
      "href": "https://gitdocumentatie.logius.nl/publicatie/api/oidc/",
      "publisher": "Logius",
      "title": "OpenID NLGov"
    },
    "Introspection": {
      "authors": [
        "J. Richer"
      ],
      "date": "October 2015",
      "href": "https://tools.ietf.org/html/rfc7662",
      "publisher": "IETF",
      "title": "OAuth 2.0 Token Introspection"
    },
    "JWA": {
      "authors": [
        "M. Jones"
      ],
      "date": "may 2015",
      "href": "https://tools.ietf.org/html/rfc7518",
      "publisher": "IETF",
      "title": "JSON Web Algorithms (JWA)"
    },
    "JWE": {
      "authors": [
        "M. Jones, J. Hildebrand"
      ],
      "date": "may 2015",
      "href": "https://tools.ietf.org/html/rfc7516",
      "publisher": "IETF",
      "title": "JSON Web Encryption (JWE)"
    },
    "JWK": {
      "authors": [
        "M. Jones"
      ],
      "date": "may 2015",
      "href": "https://tools.ietf.org/html/rfc7517",
      "publisher": "IETF",
      "title": "JSON Web Key (JWK))"
    },
    "JWS": {
      "authors": [
        "M. Jones, J. Bradley, N. Sakimura"
      ],
      "date": "may 2015",
      "href": "https://tools.ietf.org/html/rfc7515",
      "publisher": "IETF",
      "title": "JSON Web Signature (JWS)"
    },
    "JWT": {
      "authors": [
        "M. Jones, J. Bradley, N. Sakimura"
      ],
      "date": "may 2015",
      "href": "https://tools.ietf.org/html/rfc7519",
      "publisher": "IETF",
      "title": "JSON Web Token (JWT)"
    },
    "NCSC 2021": {
      "date": "Jan 2021",
      "href": "https://www.ncsc.nl/documenten/publicaties/2021/januari/19/ict-beveiligingsrichtlijnen-voor-transport-layer-security-2.1",
      "publisher": "NCSC",
      "title": "ICT-beveiligingsrichtlijnen voor Transport Layer Security (TLS) v2.1"
    },
    "NCSC 2025": {
      "date": "June 2025",
      "href": "https://www.ncsc.nl/wat-kun-je-zelf-doen/documenten/publicaties/2025/juni/01/ict-beveiligingsrichtlijnen-voor-transport-layer-security-2025-05",
      "publisher": "NCSC",
      "title": "Transport Layer Security (TLS) richtlijnen 2025-05"
    },
    "NEN3610": {
      "authors": [
        ""
      ],
      "date": "Maart 2011",
      "href": "https://www.nen.nl/nen-3610-2011-a1-2016-nl-217738",
      "publisher": "Nederlands Normalisatie-instituut",
      "title": "Basismodel Geo-informatie - Termen, definities, relaties en algemene regels voor de uitwisseling van informatie over aan de aarde gerelateerde ruimtelijke objecten"
    },
    "no-Reliable-messaging": {
      "authors": [
        "Marc de Graauw"
      ],
      "date": "June 18, 2010",
      "href": "https://www.infoq.com/articles/no-reliable-messaging/",
      "publisher": "infoQ",
      "title": "Nobody Needs Reliable Messaging"
    },
    "OAuth2": {
      "authors": [
        "D. Hardt"
      ],
      "date": "October 2012",
      "href": "https://tools.ietf.org/html/rfc6749",
      "publisher": "The Internet Engineering Task Force",
      "title": "The OAuth 2.0 Authorization Framework"
    },
    "OpenID.Core": {
      "authors": [
        "N. Sakimura, J. Bradley, M. Jones, B. de Medeiros, C. Mortimore"
      ],
      "date": "November 8 2014",
      "href": "https://openid.net/specs/openid-connect-core-1_0.html",
      "publisher": "OpenID foundation",
      "title": "OpenID Connect Core 1.0"
    },
    "OpenID.Discovery": {
      "authors": [
        "N. Sakimura, J. Bradley, M. Jones, E. Jay"
      ],
      "date": "November 8 2014",
      "href": "https://openid.net/specs/openid-connect-discovery-1_0.html",
      "publisher": "OpenID foundation",
      "title": "OpenID Connect Discovery 1.0"
    },
    "Pas-toe-of-leg-uit": {
      "href": "https://www.forumstandaardisatie.nl/open-standaarden/verplicht",
      "publisher": "Forum Standaardisatie",
      "title": "Lijst Verplichte standaarden"
    },
    "PKIO-PvE": {
      "href": "https://cp.pkioverheid.nl/",
      "publisher": "Logius",
      "title": "Certificate Policy/Programme of Requirements PKIoverheid"
    },
    "PKI-CA": {
      "href": "https://www.logius.nl/domeinen/toegang/aansluiten-als-trust-service-provider",
      "publisher": "Logius",
      "title": "Aansluiten als Trust Service Provider"
    },
    "PKIoverheid": {
      "href": "https://www.logius.nl/domeinen/toegang/pkioverheid",
      "publisher": "Logius",
      "title": "PKIoverheid"
    },
    "PKIO-Cert": {
      "href": "https://cert.pkioverheid.nl/",
      "publisher": "Logius",
      "title": "Overzicht PKIoverheid certificaten"
    },
    "SemVer": {
      "authors": [
        "T. Preston-Werner"
      ],
      "date": "June 2013",
      "href": "https://semver.org",
      "title": "Semantic Versioning 2.0.0"
    },
    "ADR-TS": {
      "authors": [
        ""
      ],
      "date": "March 07, 2024",
      "href": "https://gitdocumentatie.logius.nl/publicatie/api/mod-ts/",
      "publisher": "Kennisplatform API's",
      "title": "API Design Rules Module: Transport Security"
    },
    "UMMR10": {
      "authors": [
        ""
      ],
      "date": "2001",
      "href": "https://unece.org/DAM/cefact/umm/UMM_Revision_10_2001.zip",
      "publisher": "UN/CEFACT",
      "title": "UMM Revision 10"
    },
    "UMMUG": {
      "authors": [
        ""
      ],
      "date": "2003",
      "href": "https://www.unece.org/fileadmin/DAM/cefact/umm/UMM_userguide_220606.pdf",
      "publisher": "UN/CEFACT",
      "title": "UN/CEFACT Modeling Methodology (UMM) User Guide"
    },
    "UUID": {
      "authors": [
        "P. Leach",
        "M. Mealling",
        "R. Salz"
      ],
      "date": "July 2005",
      "href": "https://tools.ietf.org/html/rfc4122",
      "publisher": "The Internet Engineering Task Force",
      "title": "A Universally Unique IDentifier (UUID) URN Namespace"
    },
    "DK-Voorwaarden": {
      "date": "1 januari 2021",
      "href": "https://www.logius.nl/domeinen/gegevensuitwisseling/digikoppeling/documentatie/voorwaarden-digikoppeling",
      "publisher": "Logius",
      "title": "Voorwaarden Digikoppeling"
    },
    "X520": {
      "href": "https://www.iso.org/standard/43796.html",
      "publisher": "ISO",
      "title": "ITU-T Recommendation X.520 (2001) ISO/IEC 9594-6"
    },
    "ADR-Validator": {
      "href": "https://gitlab.com/commonground/don/adr-validator/-/tree/v0.5.0/pkg/rulesets",
      "title": "Technical ADR Validation rule testset 0.5.0",
      "authors": [
        "H. Stijns"
      ],
      "publisher": "Geonovum",
      "date": "November 2023"
    },
    "JRC117836": {
      "href": "https://op.europa.eu/en/publication-detail/-/publication/6521f427-01df-11ea-8c1f-01aa75ed71a1",
      "title": "The Relationship Between Open Source Software and Standard Setting",
      "authors": [
        "Knut Blind",
        "Mirko Böhm"
      ],
      "editors": [
        "Nikolaus Thumm"
      ],
      "publisher": "Joint Research Center",
      "id": "JRC117836",
      "date": "2019"
    },
    "Krechmer2002": {
      "href": "https://www.isology.com/pdf/cathedrals.pdf",
      "title": "Cathedrals, Libraries and Bazaars",
      "authors": [
        "Ken Krechmer"
      ],
      "publisher": "Association of Computing Machinery (ACM)",
      "date": "March 2002"
    },
    "FSC-Core": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/fsc/core/2.0.0/",
      "title": "FSC - Core",
      "authors": [
        "Eelco Hotting",
        "Ronald Koster",
        "Henk van Maanen",
        "Niels Dequeker",
        "Edward van Gelderen",
        "Pim Gaemers"
      ],
      "publisher": "Logius"
    },
    "FSC-Logging": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/fsc/logging/1.1.0/",
      "title": "FSC - Logging",
      "authors": [
        "Eelco Hotting",
        "Ronald Koster",
        "Henk van Maanen",
        "Niels Dequeker",
        "Edward van Gelderen",
        "Pim Gaemers"
      ],
      "publisher": "Logius"
    },
    "HEART.OAuth2": {
      "authors": [
        "J. Richer"
      ],
      "date": "April 25, 2017",
      "href": "https://openid.net/specs/openid-heart-oauth2-1_0.html",
      "publisher": "OpenID foundation",
      "title": "Health Relationship Trust Profile for OAuth 2.0"
    },
    "JWS.JWE.Algs": {
      "authors": [
        "Jim Schaad, Jeff Hodges, Joe Hildebrand, Sean Turner"
      ],
      "date": "",
      "href": "https://www.iana.org/assignments/jose/jose.xhtml#web-signature-encryption-algorithms",
      "publisher": "IANA",
      "title": "IANA JSON Web Signatures and Encryption Algorithms registry"
    },
    "I-D.ietf-oauth-pop-architecture": {
      "authors": [
        "P. Hunt, J. Richer, W. Mills, P. Mishra, H. Tschofenig"
      ],
      "date": "July 8, 2016",
      "href": "https://tools.ietf.org/html/draft-ietf-oauth-pop-architecture-08",
      "publisher": "IETF",
      "title": "OAuth 2.0 Proof-of-Possession (PoP) Security Architecture"
    },
    "iGOV.OAuth2": {
      "authors": [
        "J. Richer, M. Varley, P. Grassi"
      ],
      "date": "October 5 2018",
      "href": "https://openid.net/specs/openid-igov-oauth2-1_0-03.html",
      "publisher": "OpenID foundation",
      "title": "International Government Assurance Profile (iGov) for OAuth 2.0"
    },
    "NLGOV.OAuth2": {
      "href": "https://gitdocumentatie.logius.nl/publicatie/api/oauth/",
      "publisher": "Logius",
      "title": "NL GOV Assurance profile for OAuth 2.0"
    },
    "ietf-oauth-v2-1-10-refresh-token-grant": {
      "authors": [
        "Dick Hardt, Aaron Parecki, Torsten Lodderstedt"
      ],
      "date": "January 9, 2024",
      "href": "https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-1-10#name-refresh-token-grant",
      "publisher": "IETF",
      "title": "The OAuth 2.1 Authorization Framework: Refresh Token Grant"
    },
    "OpenID.FAPI2.0": {
      "authors": [
        "D. Fett, D. Tonge, J. Heenan"
      ],
      "date": "February 22 2025",
      "href": "https://openid.net/specs/fapi-security-profile-2_0-final.html",
      "publisher": "OpenID foundation",
      "title": "FAPI 2.0 Security Profile"
    },
    "logboek-extensie-guideline": {
      "href": "https://logius-standaarden.github.io/logboek-extensie-template/",
      "publisher": "Logius",
      "title": "LDV Extensie Guideline"
    },
    "logboek dataverwerkingen": {
      "href": "https://logius-standaarden.github.io/logboek-dataverwerkingen/",
      "publisher": "Logius",
      "title": "Logboek Dataverwerkingen"
    }
  },
  "specStatus": "CV",
  "specType": "ST",
  "pubDomain": "fsc",
  "shortName": "ext",
  "publishDate": "2026-01-19",
  "publishVersion": "1.0.0",
  "previousPublishVersion": [],
  "editors": [
    {
      "name": "Logius",
      "company": "Logius",
      "companyURL": "https://github.com/Logius-standaarden"
    }
  ],
  "authors": [
    {
      "name": "Ronald Koster",
      "company": "PhillyShell",
      "extras": [
        {
          "name": "Email",
          "href": "mailto:rfc@phillyshell.nl"
        }
      ]
    },
    {
      "name": "Niels Dequeker",
      "company": "ND Software",
      "extras": [
        {
          "name": "Email",
          "href": "mailto:niels@nd-software.be"
        }
      ]
    },
    {
      "name": "Lonneke Dikmans",
      "company": "RINIS",
      "extras": [
        {
          "name": "Email",
          "href": "mailto:ldikmans@rinis.nl"
        }
      ]
    }
  ],
  "github": "https://github.com/Logius-standaarden/fsc-external-contract",
  "preProcess": [
    null,
    null
  ]
}</script>
<link rel="stylesheet" href="https://gitdocumentatie.logius.nl/publicatie/respec/style/base.css"></head>
  <body class="h-entry toc-inline"><div class="head">
    <a class="logo" href="https://www.logius.nl/onze-dienstverlening/standaarden"><img alt="Logius" height="77" id="Logius" src="https://gitdocumentatie.logius.nl/publicatie/respec/style/logos/figure-logius.svg" width="44">
  </a> <h1 id="title" class="title">FSC - External Contract Reference 1.0.0</h1>
    
    <h2>
      Logius Standard<br>
      Consultation version
      <time class="dt-published" datetime="2026-01-19">January 19, 2026</time>
    </h2>
    <dl>
      <dt>This version:</dt><dd class="status">
              <a class="u-url status" href="https://gitdocumentatie.logius.nl/publicatie/fsc/ext/1.0.0/">https://gitdocumentatie.logius.nl/publicatie/fsc/ext/1.0.0/</a>
            </dd>
      <dt>Latest published version:</dt><dd>
              <a href="https://gitdocumentatie.logius.nl/publicatie/fsc/ext/">https://gitdocumentatie.logius.nl/publicatie/fsc/ext/</a>
            </dd>
      <dt>Latest editor's draft:</dt><dd><a href="https://logius-standaarden.github.io/fsc-external-contract/">https://logius-standaarden.github.io/fsc-external-contract/</a></dd>
      
      
      
      <dt>Previous version:</dt><dd><a href="https://gitdocumentatie.logius.nl/publicatie/fsc/ext//">https://gitdocumentatie.logius.nl/publicatie/fsc/ext//</a></dd>
      
      <dt>Editor:</dt>
      <dd class="editor p-author h-card vcard">
    <span class="p-name fn">Logius</span> (<a class="p-org org h-org" href="https://github.com/Logius-standaarden">Logius</a>)
  </dd>
      
      <dt>Authors:</dt><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Ronald Koster</span> (<span class="p-org org h-org">PhillyShell</span>), <a href="mailto:rfc@phillyshell.nl">Email</a>
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Niels Dequeker</span> (<span class="p-org org h-org">ND Software</span>), <a href="mailto:niels@nd-software.be">Email</a>
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Lonneke Dikmans</span> (<span class="p-org org h-org">RINIS</span>), <a href="mailto:ldikmans@rinis.nl">Email</a>
  </dd>
      <dt>Participate:</dt><dd>
    <a href="https://github.com/Logius-standaarden/fsc-external-contract/">GitHub Logius-standaarden/fsc-external-contract</a>
  </dd><dd>
    <a href="https://github.com/Logius-standaarden/fsc-external-contract/issues/">File an issue</a>
  </dd><dd>
    <a href="https://github.com/Logius-standaarden/fsc-external-contract/commits/">Commit history</a>
  </dd><dd>
    <a href="https://github.com/Logius-standaarden/fsc-external-contract/pulls/">Pull requests</a>
  </dd>
    </dl>
    
    
    <p>
          This document is also available in these non-normative format:
          <a rel="alternate" href="fsc-ext-1.0.0.pdf">PDF</a>
        </p>
    <p class="copyright">
            This document is licensed under 
            <a rel="license" href="https://creativecommons.org/licenses/by/4.0/legalcode" class="subfoot"><img class="license" src="https://gitdocumentatie.logius.nl/publicatie/respec/media/logos/cc-by.svg" alt="Logo Creative Commons Attribution 4.0 International Public License"><br> Creative Commons Attribution 4.0 International Public License</a>
          </p>
    <hr title="Separator for header">
  </div><section id="sotd" class="introductory"><h2>Status of This Document</h2><p>This is a proposed recommendation approved by TO. Comments regarding this document may be sent to api@logius.nl</p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li><li class="tocline"><a class="tocxref" href="#conformance">Conformance</a></li><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#purpose"><bdi class="secno">1.1 </bdi>Purpose</a></li><li class="tocline"><a class="tocxref" href="#overall-operation-of-external-contract-reference"><bdi class="secno">1.2 </bdi>Overall Operation of External Contract Reference</a></li><li class="tocline"><a class="tocxref" href="#caveat"><bdi class="secno">1.3 </bdi>Caveat</a></li><li class="tocline"><a class="tocxref" href="#terminology"><bdi class="secno">1.4 </bdi>Terminology</a></li></ol></li><li class="tocline"><a class="tocxref" href="#architecture"><bdi class="secno">2. </bdi>Architecture</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#trust-and-validation-model"><bdi class="secno">2.1 </bdi>Trust and Validation Model</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#trust-relationships"><bdi class="secno">2.1.1 </bdi>Trust Relationships</a></li><li class="tocline"><a class="tocxref" href="#validation-requirements"><bdi class="secno">2.1.2 </bdi>Validation Requirements</a></li></ol></li><li class="tocline"><a class="tocxref" href="#service-publication-delegation"><bdi class="secno">2.2 </bdi>Service Publication Delegation</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#publication-delegation-flow"><bdi class="secno">2.2.1 </bdi>Publication Delegation Flow</a></li><li class="tocline"><a class="tocxref" href="#publication-architecture-implications"><bdi class="secno">2.2.2 </bdi>Publication Architecture Implications</a></li></ol></li><li class="tocline"><a class="tocxref" href="#service-connection-delegation"><bdi class="secno">2.3 </bdi>Service Connection Delegation</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#connection-delegation-flow"><bdi class="secno">2.3.1 </bdi>Connection Delegation Flow</a></li></ol></li><li class="tocline"><a class="tocxref" href="#connection-architecture-implications"><bdi class="secno">2.4 </bdi>Connection Architecture Implications</a></li><li class="tocline"><a class="tocxref" href="#property-lifecycle"><bdi class="secno">2.5 </bdi>Property Lifecycle</a></li><li class="tocline"><a class="tocxref" href="#integration-with-fsc-core"><bdi class="secno">2.6 </bdi>Integration with FSC Core</a></li></ol></li><li class="tocline"><a class="tocxref" href="#specification"><bdi class="secno">3. </bdi>Specification</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#properties-for-an-external-contract-reference"><bdi class="secno">3.1 </bdi>Properties for an External Contract Reference</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#serviceconnectiongrant"><bdi class="secno">3.1.1 </bdi>ServiceConnectionGrant</a></li><li class="tocline"><a class="tocxref" href="#servicepublicationgrant"><bdi class="secno">3.1.2 </bdi>ServicePublicationGrant</a></li></ol></li><li class="tocline"><a class="tocxref" href="#transaction-log"><bdi class="secno">3.2 </bdi>Transaction log</a></li><li class="tocline"><a class="tocxref" href="#access-token"><bdi class="secno">3.3 </bdi>Access token</a></li><li class="tocline"><a class="tocxref" href="#inway"><bdi class="secno">3.4 </bdi>Inway</a></li><li class="tocline"><a class="tocxref" href="#outway"><bdi class="secno">3.5 </bdi>Outway</a></li></ol></li><li class="tocline"><a class="tocxref" href="#tof"><bdi class="secno">4. </bdi>List of Figures</a></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">A. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">A.1 </bdi>Normative references</a></li></ol></li></ol></nav><section id="conformance" class="introductory"><div class="header-wrapper"><h2 id="conformance-0">Conformance</h2><a class="self-link" href="#conformance" aria-label="Permalink for this Section"></a></div><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p><p>
        The key words <em class="rfc2119">MUST</em> and <em class="rfc2119">SHOULD</em> in this document
        are to be interpreted as described in
        <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
        when, and only when, they appear in all
        capitals, as shown here.
      </p></section>
    <section id="abstract" class="introductory"><h2>Abstract</h2><p>External Contract Reference is an extension on the Federated Service Connectivity (FSC) standard <a href="https://gitdocumentatie.logius.nl/publicatie/fsc/core/">FSC Core</a>.
It can only be used in addition to the FSC Core specification.
The purpose of the External Contract Reference extension is to allow delegation through contracts that are not defined by FSC.
The External Contract Reference extension contains descriptions of the Properties that can be added to the
ServiceConnectionGrant and the ServicePublicationGrant, and how these properties can be used by the FSC components.</p>
</section>
    
    
    <section id="introduction"><div class="header-wrapper"><h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a></div>
<p>The External Contract Reference specification is an extension of the Federated Service Connectivity (FSC) Core specification.
This extension enables delegation of a Service publication and Service consumption through references to external contracts (contracts not defined by FSC).</p>
<section id="purpose"><div class="header-wrapper"><h3 id="x1-1-purpose"><bdi class="secno">1.1 </bdi>Purpose</h3><a class="self-link" href="#purpose" aria-label="Permalink for Section 1.1"></a></div>
<p>In delegation as defined by FSC Core, the <em>delegator</em> organization <em class="rfc2119">MUST</em> use a FSC Manager to create and sign Contracts.
This extension addresses scenarios where the delegator lacks the technical capability to operate FSC infrastructure,
allowing a <em>delegatee</em> (API provider or consumer) to act based on an external contract.</p>
</section><section id="overall-operation-of-external-contract-reference"><div class="header-wrapper"><h3 id="x1-2-overall-operation-of-external-contract-reference"><bdi class="secno">1.2 </bdi>Overall Operation of External Contract Reference</h3><a class="self-link" href="#overall-operation-of-external-contract-reference" aria-label="Permalink for Section 1.2"></a></div>
<p>An API provider creates a Contract using a ServicePublicationGrant.
In this Contract the API provider adds a reference to an existing (paper) contract using Properties.
The Contract is received by the Peer acting as Directory. The Peer validates the reference manually or automatically, outside FSC with a custom component.
The validation itself is out of scope for this extension. The Contract is accepted and the Service is published on behalf of the organization specified in the reference.</p>
<p>An API consumer creates a Contract with a ServiceConnectionGrant.
In this Contract the API consumer adds a reference to an existing (paper) contract using Properties.
The Contract is received by the API provider. The API provider validates the reference manually or automatically, outside FSC with a custom component.
After validation the Contract is accepted and the API consumer can consume the Service on behalf of the organization specified in the reference.</p>
</section><section id="caveat"><div class="header-wrapper"><h3 id="x1-3-caveat"><bdi class="secno">1.3 </bdi>Caveat</h3><a class="self-link" href="#caveat" aria-label="Permalink for Section 1.3"></a></div>
<p>This extension is developed as a temporary solution because external contracts defined in this extension cannot be validated by FSC components. This breaks the trust. In the future, this extension will be replaced by an extension that allows Delegators to sign contracts in a cryptographically secure manner without having to use an FSC Manager.</p>
</section><section id="terminology"><div class="header-wrapper"><h3 id="x1-4-terminology"><bdi class="secno">1.4 </bdi>Terminology</h3><a class="self-link" href="#terminology" aria-label="Permalink for Section 1.4"></a></div>
<p>This section lists terms (#header) and abbreviations that are used in this document.
This document assumes that the reader is familiar with the Terminology of FSC Core.</p>
<p><em>contract:</em></p>
<p>contract without a capital C is a contract that is not defined by FSC.</p>
</section></section>
    <section id="architecture"><div class="header-wrapper"><h2 id="x2-architecture"><bdi class="secno">2. </bdi>Architecture</h2><a class="self-link" href="#architecture" aria-label="Permalink for Section 2."></a></div>
<p>This chapter describes the architecture of an External Contract Reference.</p>
<section id="trust-and-validation-model"><div class="header-wrapper"><h3 id="x2-1-trust-and-validation-model"><bdi class="secno">2.1 </bdi>Trust and Validation Model</h3><a class="self-link" href="#trust-and-validation-model" aria-label="Permalink for Section 2.1"></a></div>
<p>The key architectural principle is <strong>trust transfer</strong>: the delegatee asserts authority to act on behalf of the delegator, backed by an external contract reference.
The receiving party (Directory or API provider) performs validation of this assertion before accepting the Contract.</p>
<section id="trust-relationships"><div class="header-wrapper"><h4 id="x2-1-1-trust-relationships"><bdi class="secno">2.1.1 </bdi>Trust Relationships</h4><a class="self-link" href="#trust-relationships" aria-label="Permalink for Section 2.1.1"></a></div>
<p>The External Contract Reference introduces a three-party trust model:</p>
<ol>
<li><strong>Delegator</strong> - The organization on whose behalf services are published or consumed</li>
<li><strong>Delegatee</strong> - The organization (API provider or consumer) acting on behalf of the delegator</li>
<li><strong>Validator</strong> - The organization (Directory or API provider) that validates the External Contract Reference</li>
</ol>
<p>Trust is established through the external contract, which exists outside the FSC framework.
The <em>external contract reference</em> serves as a pointer to evidence of this trust relationship.</p>
</section><section id="validation-requirements"><div class="header-wrapper"><h4 id="x2-1-2-validation-requirements"><bdi class="secno">2.1.2 </bdi>Validation Requirements</h4><a class="self-link" href="#validation-requirements" aria-label="Permalink for Section 2.1.2"></a></div>
<p>When a Contract containing an <em>External Contract Reference</em> is received, the receiving organization:</p>
<ol>
<li><em class="rfc2119">MUST</em> verify that the external contract exists and is accessible via the provided reference</li>
<li><em class="rfc2119">MUST</em> verify that the external contract grants authority to the delegatee to act on behalf of the delegator</li>
<li><em class="rfc2119">MUST</em> verify that the delegator identity (delegator_id and delegator_name) matches the external contract</li>
<li><em class="rfc2119">SHOULD</em> verify that the scope of delegation in the external contract covers the specific Service being published or consumed</li>
</ol>
<p>The validation process itself is <strong>out of scope</strong> for this extension and <em class="rfc2119">MUST</em> be performed manually or automatically by a component outside of FSC.</p>
<p>If validation fails, the Contract <em class="rfc2119">MUST</em> be rejected. If validation succeeds, the Contract follows the FSC Core Contract lifecycle rules.</p>
</section></section><section id="service-publication-delegation"><div class="header-wrapper"><h3 id="x2-2-service-publication-delegation"><bdi class="secno">2.2 </bdi>Service Publication Delegation</h3><a class="self-link" href="#service-publication-delegation" aria-label="Permalink for Section 2.2"></a></div>
<section id="publication-delegation-flow"><div class="header-wrapper"><h4 id="x2-2-1-publication-delegation-flow"><bdi class="secno">2.2.1 </bdi>Publication Delegation Flow</h4><a class="self-link" href="#publication-delegation-flow" aria-label="Permalink for Section 2.2.1"></a></div>
<p>When an API provider publishes a Service on behalf of a delegator organization, the following architectural flow is executed:</p>
<p>
      </p><figure id="fig-figure-1-service-publication-delegation-flow">
        <img src="media/seq-publication-delegation-external-contract.svg" alt="Publication Delegation Flow">
        <figcaption><a class="self-link" href="#fig-figure-1-service-publication-delegation-flow">Figure <bdi class="figno">1</bdi></a> <span class="fig-title">Figure 1: Service Publication Delegation Flow</span></figcaption>
      </figure>
    <p></p>
<p><strong>Step-by-step process:</strong></p>
<ol>
<li><p><strong>Grant Creation</strong>: The Manager of the API provider creates a ServicePublicationGrant containing the property <code>delegation.publication.external_contract_reference</code>. This object contains three fields:</p>
<ul>
<li><code>reference</code> - URL or identifier of the external contract</li>
<li><code>delegator_id</code> - Identity of the delegator organization</li>
<li><code>delegator_name</code> - Name of the delegator organization</li>
</ul>
</li>
<li><p><strong>Contract Transmission</strong>: The Manager of the API provider creates a Contract containing the <code>ServicePublicationGrant</code> and transmits it to the Manager of the Directory.</p>
</li>
<li><p><strong>Validation</strong>: The Directory performs validation of the External Contract Reference according to the validation requirements in Section 2.2</p>
</li>
<li><p><strong>Contract Acceptance or Rejection</strong>:</p>
<ul>
<li>If validation succeeds: The Directory accepts the Contract</li>
<li>If validation fails: The Directory rejects the Contract</li>
</ul>
</li>
<li><p><strong>Contract Completion</strong>: Upon receiving the signed Contract, the API provider signs it, making the Contract valid according to FSC Core rules</p>
</li>
<li><p><strong>Service Publication</strong>: The Service is now published in the Directory on behalf of the delegator organization</p>
</li>
</ol>
</section><section id="publication-architecture-implications"><div class="header-wrapper"><h4 id="x2-2-2-publication-architecture-implications"><bdi class="secno">2.2.2 </bdi>Publication Architecture Implications</h4><a class="self-link" href="#publication-architecture-implications" aria-label="Permalink for Section 2.2.2"></a></div>
<p>The Directory <em class="rfc2119">MUST</em>:</p>
<ul>
<li>Include the content of <code>delegation.publication.external_contract_reference</code> in the Service discovery responses to indicate the true Service owner</li>
<li>Maintain audit trails of validation decisions for external contract references</li>
</ul>
</section></section><section id="service-connection-delegation"><div class="header-wrapper"><h3 id="x2-3-service-connection-delegation"><bdi class="secno">2.3 </bdi>Service Connection Delegation</h3><a class="self-link" href="#service-connection-delegation" aria-label="Permalink for Section 2.3"></a></div>
<section id="connection-delegation-flow"><div class="header-wrapper"><h4 id="x2-3-1-connection-delegation-flow"><bdi class="secno">2.3.1 </bdi>Connection Delegation Flow</h4><a class="self-link" href="#connection-delegation-flow" aria-label="Permalink for Section 2.3.1"></a></div>
<p>When an API consumer consumes a Service on behalf of an organization, the following architectural flow is executed:</p>
<p>
      </p><figure id="fig-figure-2-service-connection-delegation-flow">
        <img src="media/seq-connection-delegation-external-contract.svg" alt="Connection Delegation Flow">
        <figcaption><a class="self-link" href="#fig-figure-2-service-connection-delegation-flow">Figure <bdi class="figno">2</bdi></a> <span class="fig-title">Figure 2: Service Connection Delegation Flow</span></figcaption>
      </figure>
    <p></p>
<p><strong>Step-by-step process:</strong></p>
<ol>
<li><p><strong>Grant Creation</strong>: The Manager of the API consumer creates a <code>ServiceConnectionGrant</code> containing the Property <code>delegation.connection.external_contract_reference</code>. This object contains three fields:</p>
<ul>
<li><code>reference</code> - URL or identifier of the external contract</li>
<li><code>delegator_id</code> - Identity of the delegator organization</li>
<li><code>delegator_name</code> - Name of the delegator organization</li>
</ul>
</li>
<li><p><strong>Contract Transmission</strong>: The Manager of the API consumer creates a Contract containing the <code>ServiceConnectionGrant</code> and transmits it to the Manager of the API provider.</p>
</li>
<li><p><strong>Validation</strong>: The API provider performs validation of the External Contract Reference according to the validation requirements in Section 2.2</p>
</li>
<li><p><strong>Contract Acceptance or Rejection</strong>:</p>
<ul>
<li>If validation succeeds: The API provider signs the Contract and returns it to the API consumer</li>
<li>If validation fails: The API provider rejects the Contract</li>
</ul>
</li>
<li><p><strong>Contract Completion</strong>: Upon receiving the signed Contract, the API consumer signs it, making the Contract valid according to FSC Core rules</p>
</li>
<li><p><strong>Service Access</strong>: The API consumer can now access the Service on behalf of the delegator organization</p>
</li>
</ol>
</section></section><section id="connection-architecture-implications"><div class="header-wrapper"><h3 id="x2-4-connection-architecture-implications"><bdi class="secno">2.4 </bdi>Connection Architecture Implications</h3><a class="self-link" href="#connection-architecture-implications" aria-label="Permalink for Section 2.4"></a></div>
<p>API providers can use the <code>delegation.connection.external_contract_reference</code> added in the <code>prp</code> of the access token to:</p>
<ul>
<li>perform additional authorization</li>
<li>offer functionality based on the identity of the delegator</li>
</ul>
</section><section id="property-lifecycle"><div class="header-wrapper"><h3 id="x2-5-property-lifecycle"><bdi class="secno">2.5 </bdi>Property Lifecycle</h3><a class="self-link" href="#property-lifecycle" aria-label="Permalink for Section 2.5"></a></div>
<p>The architectural flow of external contract reference properties through the system:</p>
<ol>
<li><strong>Creation</strong>: Properties defined in <code>ServicePublicationGrant</code> or <code>ServiceConnectionGrant</code></li>
<li><strong>Contract Storage</strong>: Properties stored with the Contract in the Manager</li>
<li><strong>Access Token Generation</strong> (for service connections only): Properties included in <code>prp</code> claim when API consumer requests access</li>
<li><strong>Service Request</strong>: Access token with properties sent to Inway of the API provider</li>
<li><strong>Transaction Logging</strong>: Properties extracted and logged in transaction log as <code>additional_data</code></li>
</ol>
<p>This end-to-end propagation ensures complete traceability and auditability of delegated service access.</p>
</section><section id="integration-with-fsc-core"><div class="header-wrapper"><h3 id="x2-6-integration-with-fsc-core"><bdi class="secno">2.6 </bdi>Integration with FSC Core</h3><a class="self-link" href="#integration-with-fsc-core" aria-label="Permalink for Section 2.6"></a></div>
<p>This extension integrates with FSC Core as follows:</p>
<ul>
<li><strong>Section 3.2 (Contract Management)</strong>: Adds optional properties to <code>ServicePublicationGrant</code> and <code>ServiceConnectionGrant</code></li>
<li><strong>Section 3.6 (Delegation)</strong>: Provides an alternative delegation mechanism for organizations that cannot operate FSC Managers</li>
<li><strong>Section 3.8 (Authorization)</strong>: External Contract Reference properties in access tokens enable fine-grained authorization decisions</li>
<li><strong>Transaction Log Extension</strong>: Defines how External Contract References are logged for auditability</li>
</ul>
</section></section>
    <section id="specification"><div class="header-wrapper"><h2 id="x3-specification"><bdi class="secno">3. </bdi>Specification</h2><a class="self-link" href="#specification" aria-label="Permalink for Section 3."></a></div>
<section id="properties-for-an-external-contract-reference"><div class="header-wrapper"><h3 id="x3-1-properties-for-an-external-contract-reference"><bdi class="secno">3.1 </bdi>Properties for an External Contract Reference</h3><a class="self-link" href="#properties-for-an-external-contract-reference" aria-label="Permalink for Section 3.1"></a></div>
<p>The External Contract Reference can be added to the <code>ServiceConnectionGrant</code> and <code>ServicePublicationGrant</code> using Properties.
The Grants and Properties are both defined in <a href="https://gitdocumentatie.logius.nl/publicatie/fsc/core/">FSC Core</a>.</p>
<section id="serviceconnectiongrant"><div class="header-wrapper"><h4 id="x3-1-1-serviceconnectiongrant"><bdi class="secno">3.1.1 </bdi>ServiceConnectionGrant</h4><a class="self-link" href="#serviceconnectiongrant" aria-label="Permalink for Section 3.1.1"></a></div>
<ul>
<li><em>delegation.connection.external_contract_reference(object):</em>
The object that contains the delegation information</li>
<li><em>reference(string):</em><br>The reference to the contract. Must be a string. Example shown uses a URL, but any string value is valid</li>
<li><em>delegator_id(string):</em>
The ID of the Delegator that has delegated the authorisation to publish the Service</li>
<li><em>delegator_name(string):</em>
The name of the Delegator that has delegated the authorisation to publish the Service</li>
</ul>
<p>All properties are required when using the <code>delegation.connection.external_contract_reference</code> object.</p>
<p>Example:</p>
<pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"delegation.connection.external_contract_reference"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"reference"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://linktocontract.nl/1"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"delegator_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345678901234567890"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"delegator_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Example organisation"</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</section><section id="servicepublicationgrant"><div class="header-wrapper"><h4 id="x3-1-2-servicepublicationgrant"><bdi class="secno">3.1.2 </bdi>ServicePublicationGrant</h4><a class="self-link" href="#servicepublicationgrant" aria-label="Permalink for Section 3.1.2"></a></div>
<ul>
<li><em>delegation.publication.external_contract_reference(object):</em>
The object that contains the delegation information</li>
<li><em>reference(string):</em><br>The reference to the contract. Must be a string. Example shown uses a URL, but any string value is valid</li>
<li><em>delegator_id(string):</em>
The ID of the Delegator that has delegated the authorisation to publish the Service</li>
<li><em>delegator_name(string):</em>
The name of the Delegator that has delegated the authorisation to publish the Service</li>
</ul>
<p>All properties are required when using the <code>delegation.publication.external_contract_reference</code> object.</p>
<p>Example:</p>
<pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"delegation.publication.external_contract_reference"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"reference"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://linktocontract.com/1"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"delegator_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345678901234567890"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"delegator_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Example organisation"</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</section></section><section id="transaction-log"><div class="header-wrapper"><h3 id="x3-2-transaction-log"><bdi class="secno">3.2 </bdi>Transaction log</h3><a class="self-link" href="#transaction-log" aria-label="Permalink for Section 3.2"></a></div>
<p>In Groups that use the <a href="https://gitdocumentatie.logius.nl/publicatie/fsc/logging/">Transaction log extension</a> the External Contract Reference properties <strong><em class="rfc2119">MUST</em></strong> be stored as <code>additional_data</code> in the transaction log.</p>
<p>Example Transaction Log record:</p>
<pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"transaction_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"019a7dea-9048-7c4d-9e66-4d3f75a18f58"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"direction"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"DIRECTION_INCOMING"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"grant_hash"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$1$4$+PQI7we01qIfEwq4O5UioLKzjGBgRva6F5+bUfDlKxUjcY5yX1MRsn6NKquDbL8VcklhYO9sk18rHD6La3w/mg"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SOURCE_TYPE_SOURCE"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"outway_peer_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345678901234567891"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"destination"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"DESTINATION_TYPE_DESTINATION"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"service_peer_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345678901234567891"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"service_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"random_service_name"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"additional_data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"delegation.connection.external_contract_reference"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"reference"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://linktocontract.com/1"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"delegator_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345678901234567890"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"delegator_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Example organization"</span>
        <span class="hljs-punctuation">}</span> 
    <span class="hljs-punctuation">}</span>
    <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1672527600</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</section><section id="access-token"><div class="header-wrapper"><h3 id="x3-3-access-token"><bdi class="secno">3.3 </bdi>Access token</h3><a class="self-link" href="#access-token" aria-label="Permalink for Section 3.3"></a></div>
<p>The External Contract Reference properties are added to the Access Token. FSC Core defines that properties added to a Grant <strong><em class="rfc2119">MUST</em></strong> be added the access token as the <code>prp</code> claim.</p>
<p>Example access token bases on a <code>ServiceConnectionGrant</code> with an External Contract Reference.</p>
<pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"gid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fsc.group.example.id"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"gth"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$1$3$n4kellB6p2-VjrriscICkH3P5flgMmG6rX7MFIF3cU2Y2OVysoU6W903TkGCH3u_bB1XhOgdOVFhLCVj1iFnNg"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"sub"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345678901234567890"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"iss"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345678901234567891"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"svc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"test"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"aud"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://inway.organization-b.open-fsc.localhost:443"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"exp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1493726400</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"nbf"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1493722800</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"cnf"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"x5t#S256"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"06QekfpQ2IkYWhXyZqz3T1llvPEqDYYO0UyETSr7QdU"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prp"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"delegation.connection.external_contract_reference"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"reference"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://linktocontract.com/1"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"delegator_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345678901234567893"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"delegator_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Example organization"</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</section><section id="inway"><div class="header-wrapper"><h3 id="x3-4-inway"><bdi class="secno">3.4 </bdi>Inway</h3><a class="self-link" href="#inway" aria-label="Permalink for Section 3.4"></a></div>
<p>The Inway <strong><em class="rfc2119">MUST</em></strong> include External Contract Reference properties in the Transaction Log records as <code>additional_data</code> when the Logging extension is used.</p>
</section><section id="outway"><div class="header-wrapper"><h3 id="x3-5-outway"><bdi class="secno">3.5 </bdi>Outway</h3><a class="self-link" href="#outway" aria-label="Permalink for Section 3.5"></a></div>
<p>The Outway <strong><em class="rfc2119">MUST</em></strong> include External Contract Reference properties in the Transaction Log records as <code>additional_data</code> when the Logging extension is used.</p>
</section></section>
    
    <section id="tof"><div class="header-wrapper"><h2 id="x4-list-of-figures"><bdi class="secno">4. </bdi>List of Figures</h2><a class="self-link" href="#tof" aria-label="Permalink for Section 4."></a></div><ul class="tof">
        <li class="tofline">
    <a class="tocxref" href="#fig-figure-1-service-publication-delegation-flow"><span class="self-link">Figure <bdi class="figno">1</bdi></span> <span class="fig-title">Figure 1: Service Publication Delegation Flow</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-figure-2-service-connection-delegation-flow"><span class="self-link">Figure <bdi class="figno">2</bdi></span> <span class="fig-title">Figure 2: Service Connection Delegation Flow</span></a>
  </li>
      </ul></section>
  

<section id="references" class="appendix"><div class="header-wrapper"><h2 id="a-references"><bdi class="secno">A. </bdi>References</h2><a class="self-link" href="#references" aria-label="Permalink for Appendix A."></a></div><section id="normative-references">
    <div class="header-wrapper"><h3 id="a-1-normative-references"><bdi class="secno">A.1 </bdi>Normative references</h3><a class="self-link" href="#normative-references" aria-label="Permalink for Appendix A.1"></a></div>
    <dl class="bibliography"><dt id="bib-rfc2119">[RFC2119]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
    </dd><dt id="bib-rfc8174">[RFC8174]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
    </dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><div class="sidelabel">Logius Standard - Consultation version</div><script src="https://gitdocumentatie.logius.nl/publicatie/respec/fixup.js"></script></body></html>